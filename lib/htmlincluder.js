!function(t,e){for(var n in e)t[n]=e[n]}(exports,function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=5)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=e.wrapFiles={},i=e.insertFiles={},a=e.pageFiles=[],o=e.options={},s=e.devOptions={},u=e.insertPattern=void 0,c=e.filePathAttribute=void 0,l=e.jsonPathAttribute=void 0;e.configureFiles=function(t){"_"===t.name[0]?r[t.path]=t:"-"===t.name[0]?i[t.path]=t:a.push(t)},e.setOptions=function(t){e.devOptions=s=t.dev||{},e.options=o=t,e.insertPattern=u=o.insertPattern?"\x3c!--#"+o.insertPattern:"\x3c!--#insert",e.filePathAttribute=c=o.filePathAttribute?o.filePathAttribute:"path",e.jsonPathAttribute=l=o.jsonPathAttribute?o.jsonPathAttribute:"jsonPath"}},function(t,e,n){"use strict";function r(t,e){return e.indexOf(t+'="')>-1}function i(t,e){var n=-1,r=-1;return-1===(n=e.indexOf(t+'="'))?(console.warn("Warning: no tag of name `"+t+"` found in the following content: `"+e+"`"),""):(e=e.slice(n+t.length+2),r=e.indexOf('"'),e=e.slice(0,r))}function a(t,e,n){var r=-1,i=-1,a="",o="";return r=e.indexOf(t+'="'),a=e.slice(0,r+t.length+2),e=e.slice(r+t.length+2),i=e.indexOf('"'),o=e.slice(i),e=a+n+o}function o(t,e,n){var r=-1,i="",a="";return r=e.indexOf(t+'="'),i=e.slice(0,r),a=e.slice(r+t.length),i+n+a}function s(t,e){var n=-1,i=-1,a="",o="",s=e;if(r(t,s)){if(n=s.indexOf(t+'="'),a=s.slice(0,n),o=s.slice(n+t.length+2),-1===(i=o.indexOf('"')))return console.error('ERROR: No close `"` in tag '+e),e;o=o.slice(i+1),s=""}return a+s+o}function u(t,e,n){var r=-1,i="",a="",o=e;return r=o.indexOf(" "),r>-1&&(i=o.slice(0,r),a=o.slice(r),o=" "+t+'="'+n+'"'),i+o+a}Object.defineProperty(e,"__esModule",{value:!0}),e.hasTagAttribute=r,e.getTagAttribute=i,e.setTagAttribute=a,e.changeTagAttributeName=o,e.removeTagAttribute=s,e.addTagAttribute=u},function(t,e,n){"use strict";function r(t,e){var n,r=e||c.options.jsonInput;return"*"===t?c.options.jsonInput:"this"===t?r:(n=t.split(".").reduce(function(t,e){return t?t[e]:""},r),Array.isArray(n)||"object"===(void 0===n?"undefined":s(n))&&(n=(0,u.toSafeJsonString)(n)),n)}function i(t,e,n){var r=0,i=t.substr(1),a=i.indexOf(n),o=i.indexOf(e);if(-1===a&&console.error("No Close tag"),-1===o||o>a)return a+4;r=1,o+=1,a+=1;do{var s=void 0,u=void 0;if(o>-1&&o<a)s=i.substr(o).indexOf(e),s>-1?(o+=s+2,r+=1):o=-1;else if((u=i.substr(a).indexOf(n))>-1)a+=u+2,r-=1;else if(r>0){console.error("There is an unclosed tag",t);break}}while(r>0);return a+=4,-1===a&&console.error("ERROR: no closing tag! you are missing a '"+n+"'"),a}function a(t,e){var n=[],r=-1,a="",o=e||"\x3c!--#";if(-1===(r=t.indexOf(o)))return[t];for(;r>-1;){a=t.slice(0,r),n.push(a),t=t.slice(r);var s=i(t,o,"--\x3e");a=t.slice(0,s),n.push(a),t=t.slice(s),r=t.indexOf(o),-1===r&&n.push(t)}return n}function o(t,e,n,r){for(var i=-1,a=1,o=n+1;o<r.length;o++){var s=Array.isArray(r[o])?r[o][l]:r[o];if(0===s.indexOf(t))a++;else if(0===s.indexOf(e)&&0===--a){i=o;break}}return i}Object.defineProperty(e,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.getDataFromJsonPath=r,e.getIndexOfClosingBrace=i,e.splitContent=a,e.findIndexOfClosingTag=o;var u=n(3),c=n(0),l=3},function(module,exports,__webpack_require__){"use strict";function toSafeJsonString(t){return JSON.stringify(t).replace(/\'/g,"\\'").replace(/"/g,"'")}function processRawJson(jsonString){var jsonData={};"object"===(void 0===jsonString?"undefined":_typeof(jsonString))&&(jsonString=toSafeJsonString(jsonString));try{eval("jsonData = "+jsonString)}catch(t){console.error("ERROR: Poorly formatted rawJson string: "+jsonString+"\n\n This must be valid JavaScript.")}return jsonData}function appendJsonParentPath(t,e){var n=-1,r="";return""===e||"this"===e?t:(t=(0,_parsing.splitContent)(t,"\x3c!--#data"),t.length>1&&(t=t.map(function(t,i,a){return 0===t.indexOf("\x3c!--#data")&&(n=t.indexOf(_config.jsonPathAttribute+'="'),n>-1?(r=t.slice(0,n+10),t=r+e+"."+t.slice(n+10)):console.error("ERROR: '\x3c!--#data' tag with no 'jsonPath'")),t})),t=t.join(""))}function addRawJsonWhereJsonPath(t,e,n){if(n&&e){var r=processRawJson(e);e=(0,_parsing.getDataFromJsonPath)(n,r)}return t=bluntDataTagsInEaches(t),t=(0,_parsing.splitContent)(t),t.length>1&&(t=t.map(function(t,n,r){return 0===t.indexOf("\x3c!--#")&&(0,_attributes.hasTagAttribute)(_config.jsonPathAttribute,t)&&!(0,_attributes.hasTagAttribute)("rawJson",t)&&(t=(0,_attributes.addTagAttribute)("rawJson",t,e)),t})),t=t.join(""),t=unbluntDataTagsInEaches(t)}function bluntDataTagsInEaches(t){var e=(0,_parsing.splitContent)(t),n=0;return t=e.map(function(t,e,r){return 0===t.indexOf("\x3c!--#each")&&n++,0===t.indexOf("\x3c!--#endeach")&&n--,0===t.indexOf("\x3c!--#data")&&n>0&&(t=t.replace("\x3c!--#data","\x3c!--@#data")),t}).join(""),n>0&&console.error("Error: Mismatched number of each and endeach tags"),t}function unbluntDataTagsInEaches(t){return t=t.replace(/<!--@#data/g,"\x3c!--#data")}Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};exports.toSafeJsonString=toSafeJsonString,exports.processRawJson=processRawJson,exports.appendJsonParentPath=appendJsonParentPath,exports.addRawJsonWhereJsonPath=addRawJsonWhereJsonPath;var _parsing=__webpack_require__(2),_attributes=__webpack_require__(1),_config=__webpack_require__(0)},function(t,e,n){"use strict";function r(t){var e={name:"",path:t.path,content:t.contents.toString("utf8").trim(),processed:!1,file:t};return e.name=s.isWin?t.path.split("\\"):t.path.split("/"),e.name=e.name[e.name.length-1],e}function i(t){return s.isWin?t.replace(/\//g,"\\"):t.replace(/\\/g,"/")}function a(t,e){var n,r=s.isWin?"\\":"/";return n=t.split(r),e=i(e),n.pop(),e.split(r).forEach(function(t){".."===t?n.pop():"."!==t&&""!==t&&n.push(t)}),n=n.join(r),l.devOptions.printPaths&&(console.log("********buildPathFromRelativePath********"),console.log("cdir  : ",t),console.log("fdir  : ",e),console.log("result: ",n),console.log("********end buildPathFromRelativePath********")),n}function o(t,e){var n="";return t=(0,c.splitContent)(t),t=t.map(function(t){return 0!==t.indexOf(l.insertPattern)&&0!==t.indexOf("\x3c!--#wrap")||(n=(0,u.getTagAttribute)(l.filePathAttribute,t),n=a(e,n),t=(0,u.setTagAttribute)(l.filePathAttribute,t,n),t=(0,u.changeTagAttributeName)(l.filePathAttribute,t,"absPath")),t}),t=t.join("")}Object.defineProperty(e,"__esModule",{value:!0}),e.File=r,e.buildPathFromRelativePath=a,e.updateRelativePaths=o;var s=n(8),u=n(1),c=n(2),l=n(0)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=n(6),a=r(i),o=n(7),s=r(o),u=n(0),c=n(4);t.exports={initialize:function(t){return(0,u.setOptions)(t)},hashFile:function(t){var e=(0,c.File)(t);(0,a.default)(e),(0,u.configureFiles)(e)},buildFileResult:function(t){return u.pageFiles.map(function(e){return e.content=(0,s.default)(e.content,e.path,u.options.jsonInput||{}),e.content=e.content.replace(/<!--!#/g,"\x3c!--#"),e.processed=!0,t&&t(e),e})}}},function(t,e,n){"use strict";function r(t){var e;t.content.indexOf("\x3c!--#clipbefore")>-1&&(t.content=t.content.split(/<!--#clipbefore\s*-->/).splice(1)[0].split("\x3c!--#clipafter").splice(0,1)[0]),t.content.indexOf("\x3c!--#clipbetween")>-1&&(e=t.content.split(/<!--#clipbetween\s*-->/),t.content=e[0]+e[1].split(/<!--#endclipbetween\s*-->/)[1])}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n){var r=[],i=0,o=t;for(r=(0,c.splitContent)(t);r.length>1;){if(r=a(r,e,n),(t=r.join(""))===o)return console.error("Content was split, but no change was made in it: "+t),console.error("Something in your tagging may be making it impossible to process correctly"),console.error("Returning the content without further processing"),t;if(r=(0,c.splitContent)(t),_.devOptions.printIterations&&console.log(t),_.devOptions.limitIterations&&++i>=_.devOptions.limitIterations)break}return _.devOptions.printResult&&console.log(t),t}function a(t,e,n){for(var r=void 0,a=e,c=0;c<t.length;c++){var p=t[c];if(0===p.indexOf("\x3c!--#")){p="<"+i(p.substr(0,p.length-1).substr(1),e,n)+">";var h=(0,f.hasTagAttribute)(_.filePathAttribute,p),b=(0,f.hasTagAttribute)("absPath",p);h?r=(0,l.buildPathFromRelativePath)(a,(0,f.getTagAttribute)(_.filePathAttribute,p)):b&&(r=(0,f.getTagAttribute)("absPath",p),a=r);var x={content:p,path:a,tmpPath:r};if(0===p.indexOf("\x3c!--#data"))t[c]=(0,d.default)(p,n);else if(0===p.indexOf("\x3c!--#jsonInsert"))t[c]=(0,O.default)(p);else if(0===p.indexOf(_.insertPattern)){var A=(0,P.default)(x,n);t[c]=s(A)}else if(0===p.indexOf("\x3c!--#wrap")){var y=(0,m.default)(x,c,t,n),w=u(y,2),R=w[0],j=w[1];t[R]=s(t[R]),t[j]=s(t[j])}else 0===p.indexOf("\x3c!--#if")?(0,v.default)(x,c,t,n):0===p.indexOf("\x3c!--#each")?((0,g.default)(x,c,t,n),t[c]=o(t[c],a)):(console.error("An unidentified tag is being used: "+p),t[c]=p.replace("\x3c!--#","\x3c!--!#"));a=e}}return t}function o(t,e){if(!Array.isArray(t))return t;for(var n="",r=0;r<t.length;r++)if(Array.isArray(t[r])){var a=u(t[r],2),o=a[0],s=a[1];n+=i(s,e,o)}else n+=t[r];return n}function s(t){var e=u(t,4),n=e[0],r=(e[1],e[2]);return i(e[3],r,n)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,a=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.default=i;var c=n(2),l=n(4),f=n(1),p=(n(3),n(9)),d=r(p),h=n(10),g=r(h),b=n(11),v=r(b),x=n(12),P=r(x),A=n(13),O=r(A),y=n(14),m=r(y),_=n(0)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.isWin=/^win/.test(process.platform)},function(t,e,n){"use strict";function r(t,e){var n="",r="",u="",c="";n=(0,i.getTagAttribute)(s.jsonPathAttribute,t),(0,i.hasTagAttribute)("default",t)&&(u=(0,i.getTagAttribute)("default",t)),(0,i.hasTagAttribute)("rawJson",t)?(r=(0,i.getTagAttribute)("rawJson",t),r=(0,a.processRawJson)(r)):e&&(r=(0,a.processRawJson)(e)),c=(0,o.getDataFromJsonPath)(n,r);var l=c||u;return"string"==typeof l?l:JSON.stringify(l).replace(/"/g,"'")}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var i=n(1),a=n(3),o=n(2),s=n(0)},function(t,e,n){"use strict";function r(t,e,n,r){var u=-1,c=e+1,l=n[e],f="",p="",d="",h=!1;if(-1===(u=(0,o.findIndexOfClosingTag)("\x3c!--#each","\x3c!--#endeach",e,n)))return void console.error("ERROR: in file "+t.path+": \x3c!--#each --\x3e with no \x3c!--#endeach --\x3e");if(u===e-1&&console.warn("WARNING: in file "+t.path+": \x3c!--#each --\x3e with no content"),(0,i.hasTagAttribute)(s.jsonPathAttribute,l)&&(f=(0,i.getTagAttribute)(s.jsonPathAttribute,l)),(0,i.hasTagAttribute)("rawJson",l)?(p=(0,i.getTagAttribute)("rawJson",l),p=(0,a.processRawJson)(p)):r&&(p=(0,a.processRawJson)(r)),f&&(d=(0,o.getDataFromJsonPath)(f,p)),(0,i.hasTagAttribute)("count",l)&&(h=parseInt((0,i.getTagAttribute)("count",l),10)),Array.isArray(d)&&(h?h>d.length&&(console.warn("WARNING: in file "+t.path+": \x3c!--#each --\x3e with count attribute higher than array input's length. Changing to length of array"),h=d.length):h=d.length),!h&&!f)return void console.error("ERROR: in file "+t.path+": \x3c!--#each --\x3e with no count attribute, and no array as json object.");n[e]="",n[u]="";var g=n.splice(c,u-c).join("");l=[];for(var b=0;b<h;b++)d?l.push([d[b],g]):l.push(g);n.splice(e,2,l)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var i=n(1),a=n(3),o=n(2),s=n(0)},function(t,e,n){"use strict";function r(t,e,n,r){var u=-1,c=n[e],l="",f="",p=void 0;return(0,i.hasTagAttribute)(s.jsonPathAttribute,c)&&(f=(0,i.getTagAttribute)(s.jsonPathAttribute,c)),(0,i.hasTagAttribute)("rawJson",c)?(l=(0,i.getTagAttribute)("rawJson",c),l=(0,a.processRawJson)(l)):r&&(l=(0,a.processRawJson)(r)),p=(0,o.getDataFromJsonPath)(f,l),n[e]="",-1===(u=(0,o.findIndexOfClosingTag)("\x3c!--#if","\x3c!--#endif",e,n))?void console.error("ERROR: in file "+t.path+": \x3c!--#if . . . --\x3e with no \x3c!--#endif . . . --\x3e"):(n[u]="",f?void(void 0!==p&&0!=p||n.splice(e,u-e)):void console.error("ERROR: in file "+t.path+": \x3c!--#if --\x3e with no jsonPath"))}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var i=n(1),a=n(3),o=n(2),s=n(0)},function(t,e,n){"use strict";function r(t,e){var n="",r=t.content,s=(0,i.hasTagAttribute)("rawJson",r)?(0,i.getTagAttribute)("rawJson",r):"",u=(0,i.hasTagAttribute)(o.jsonPathAttribute,r)?(0,i.getTagAttribute)(o.jsonPathAttribute,r):"";return(0,i.hasTagAttribute)(o.filePathAttribute,r)?(n=(0,i.getTagAttribute)(o.filePathAttribute,r),n=(0,a.buildPathFromRelativePath)(t.path,n)):(0,i.hasTagAttribute)("absPath",r)&&(n=(0,i.getTagAttribute)("absPath",r)),o.insertFiles[n]?(r=o.insertFiles[n].content,[s,u,t.tmpPath,r]):(console.error("ERROR: in file '"+t.path+"': insert file `"+n+"` does not exist"),"")}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var i=n(1),a=(n(3),n(4)),o=n(0)},function(t,e,n){"use strict";function r(t){var e=(0,i.hasTagAttribute)("default",t)?(0,i.getTagAttribute)("default",t):"",n=(0,i.getTagAttribute)(o.jsonPathAttribute,t),r=(0,a.getDataFromJsonPath)(n);return r||e?r||e:(console.warn("ERROR: jsonPath `"+n+"` is undefined, and no default value"),"")}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var i=n(1),a=n(2),o=n(0)},function(t,e,n){"use strict";function r(t,e,n,r){var u=-1,c="",l=n[e],f="",p="",d="",h=l.indexOf('path="')>-1?'path="':'absPath="';return(0,i.hasTagAttribute)(a.jsonPathAttribute,l)&&(d=(0,i.getTagAttribute)(a.jsonPathAttribute,l)),(0,i.hasTagAttribute)("rawJson",l)&&(p=(0,i.getTagAttribute)("rawJson",l)),f='path="'===h?(0,i.getTagAttribute)(a.filePathAttribute,n[e]):(0,i.getTagAttribute)("absPath",n[e]),c='path="'===h?(0,o.buildPathFromRelativePath)(t.path,f):f,-1===(u=(0,s.findIndexOfClosingTag)("\x3c!--#wrap","\x3c!--#endwrap",e,n))?(console.error("ERROR: in file "+t.path+": \x3c!--#wrap . . . --\x3e with no \x3c!--#endwrap . . . --\x3e"),""):a.wrapFiles[c]?(l=a.wrapFiles[c].content.split(/<!--#middle\s*-->/),2!==l.length?(console.error("ERROR: in file "+t.path+": wrap file has no \x3c!--#middle--\x3e or more than one \x3c!--#middle--\x3e tags"),""):(n[e]=[p,d,t.tmpPath,l[0]],n[u]=[p,d,t.tmpPath,l[1]],[e,u])):(console.error("ERROR: in file "+t.path+": no wrapFile by the name `"+f+"`"),"")}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var i=n(1),a=n(0),o=(n(3),n(4)),s=n(2)}]));
//# sourceMappingURL=htmlincluder.js.map